# Production environment values for bdc-card-admin
image:
  repository: 909200564439.dkr.ecr.ap-northeast-2.amazonaws.com/bdc-card-admin
  tag: prod-538b96f-20260122-103520
ingress:
  enabled: true
  className: alb
  host: bdc-card-admin.barunsoncard.com
  path: /
  annotations:
    alb.ingress.kubernetes.io/group.name: shared-alb
    alb.ingress.kubernetes.io/scheme: internal
    alb.ingress.kubernetes.io/target-type: ip
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTP": 80}, {"HTTPS": 443}]'
    alb.ingress.kubernetes.io/certificate-arn: arn:aws:acm:ap-northeast-2:909200564439:certificate/5c867399-4122-4893-b58a-b36eeeccee1d
    alb.ingress.kubernetes.io/healthcheck-path: /api/health
    alb.ingress.kubernetes.io/healthcheck-interval-seconds: '15'
    alb.ingress.kubernetes.io/healthcheck-timeout-seconds: '5'
    alb.ingress.kubernetes.io/healthy-threshold-count: '2'
    alb.ingress.kubernetes.io/unhealthy-threshold-count: '2'
namespace: bdc-card-admin
resources:
  limits:
    cpu: 200m
    memory: 256Mi
  requests:
    cpu: 50m
    memory: 128Mi
autoscaling:
  enabled: true
  minReplicas: 2
  maxReplicas: 4
  targetCPUUtilizationPercentage: 75
rollout:
  enabled: true
  annotations:
    notifications.argoproj.io/subscribe.on-rollout-completed.slack: ""
    notifications.argoproj.io/subscribe.on-rollout-degraded.slack: ""
  blueGreen:
    autoPromotionEnabled: true
    scaleDownDelaySeconds: 30
# Vault Secrets - 런타임 환경변수
vaultSecrets:
  enabled: true
  secrets:
    - name: vault-secret
      path: prod/bdc-card-admin
      refreshInterval: 30s
serviceAccount:
  create: true
  name: bdc-card-admin-sa
  annotations:
    eks.amazonaws.com/role-arn: arn:aws:iam::909200564439:role/bdc-card-admin-irsa-role
# Pod Anti-Affinity for HA
affinity:
  podAntiAffinity:
    preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        podAffinityTerm:
          labelSelector:
            matchLabels:
              app.kubernetes.io/name: bdc-card-admin
          topologyKey: topology.kubernetes.io/zone
      - weight: 50
        podAffinityTerm:
          labelSelector:
            matchLabels:
              app.kubernetes.io/name: bdc-card-admin
          topologyKey: kubernetes.io/hostname
